"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (base64Str) {
  var iOut = 0;
  var arr = new Uint8Array(Math.ceil(base64Str.length * 3 / 4));

  for (var i = 0, len = base64Str.length, validBits = 0, bitsSoFar = 0; i < len; i++) {
    var bits = void 0;
    var c = base64Str.charCodeAt(i);
    if (c >= 0x41 && c <= 0x5a) {
      // [A-Z]
      bits = c - 0x41;
    } else if (c >= 0x61 && c <= 0x7a) {
      // [a-z]
      bits = c - 0x61 + 0x1a;
    } else if (c >= 0x30 && c <= 0x39) {
      // [0-9]
      bits = c - 0x30 + 0x34;
    } else if (c === 0x2b) {
      // +
      bits = 0x3e;
    } else if (c === 0x2f) {
      // /
      bits = 0x3f;
    } else if (c === 0x3d) {
      // =
      validBits = 0;
      continue;
    } else {
      // ignore all other characters!
      continue;
    }
    bitsSoFar = bitsSoFar << 6 | bits;
    validBits += 6;
    if (validBits >= 8) {
      validBits -= 8;
      arr[iOut++] = bitsSoFar >> validBits;
      if (validBits === 2) {
        bitsSoFar &= 0x03;
      } else if (validBits === 4) {
        bitsSoFar &= 0x0f;
      }
    }
  }

  return iOut < arr.length ? arr.subarray(0, iOut) : arr;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9iYXNlNjQtZGVjb2RlLmpzIl0sIm5hbWVzIjpbImJhc2U2NFN0ciIsImlPdXQiLCJhcnIiLCJVaW50OEFycmF5IiwiTWF0aCIsImNlaWwiLCJsZW5ndGgiLCJpIiwibGVuIiwidmFsaWRCaXRzIiwiYml0c1NvRmFyIiwiYml0cyIsImMiLCJjaGFyQ29kZUF0Iiwic3ViYXJyYXkiXSwibWFwcGluZ3MiOiI7Ozs7OztrQkFBZSxVQUFVQSxTQUFWLEVBQXFCO0FBQ2xDLE1BQUlDLE9BQU8sQ0FBWDtBQUNBLE1BQU1DLE1BQU0sSUFBSUMsVUFBSixDQUFlQyxLQUFLQyxJQUFMLENBQVVMLFVBQVVNLE1BQVYsR0FBbUIsQ0FBbkIsR0FBdUIsQ0FBakMsQ0FBZixDQUFaOztBQUVBLE9BQUssSUFBSUMsSUFBSSxDQUFSLEVBQVdDLE1BQU1SLFVBQVVNLE1BQTNCLEVBQW1DRyxZQUFZLENBQS9DLEVBQWtEQyxZQUFZLENBQW5FLEVBQXNFSCxJQUFJQyxHQUExRSxFQUErRUQsR0FBL0UsRUFBb0Y7QUFDbEYsUUFBSUksYUFBSjtBQUNBLFFBQU1DLElBQUlaLFVBQVVhLFVBQVYsQ0FBcUJOLENBQXJCLENBQVY7QUFDQSxRQUFJSyxLQUFLLElBQUwsSUFBYUEsS0FBSyxJQUF0QixFQUE0QjtBQUFFO0FBQzVCRCxhQUFPQyxJQUFJLElBQVg7QUFDRCxLQUZELE1BRU8sSUFBSUEsS0FBSyxJQUFMLElBQWFBLEtBQUssSUFBdEIsRUFBNEI7QUFBRTtBQUNuQ0QsYUFBT0MsSUFBSSxJQUFKLEdBQVcsSUFBbEI7QUFDRCxLQUZNLE1BRUEsSUFBSUEsS0FBSyxJQUFMLElBQWFBLEtBQUssSUFBdEIsRUFBNEI7QUFBRTtBQUNuQ0QsYUFBT0MsSUFBSSxJQUFKLEdBQVcsSUFBbEI7QUFDRCxLQUZNLE1BRUEsSUFBSUEsTUFBTSxJQUFWLEVBQWdCO0FBQUU7QUFDdkJELGFBQU8sSUFBUDtBQUNELEtBRk0sTUFFQSxJQUFJQyxNQUFNLElBQVYsRUFBZ0I7QUFBRTtBQUN2QkQsYUFBTyxJQUFQO0FBQ0QsS0FGTSxNQUVBLElBQUlDLE1BQU0sSUFBVixFQUFnQjtBQUFFO0FBQ3ZCSCxrQkFBWSxDQUFaO0FBQ0E7QUFDRCxLQUhNLE1BR0E7QUFDTDtBQUNBO0FBQ0Q7QUFDREMsZ0JBQWFBLGFBQWEsQ0FBZCxHQUFtQkMsSUFBL0I7QUFDQUYsaUJBQWEsQ0FBYjtBQUNBLFFBQUlBLGFBQWEsQ0FBakIsRUFBb0I7QUFDbEJBLG1CQUFhLENBQWI7QUFDQVAsVUFBSUQsTUFBSixJQUFjUyxhQUFhRCxTQUEzQjtBQUNBLFVBQUlBLGNBQWMsQ0FBbEIsRUFBcUI7QUFDbkJDLHFCQUFhLElBQWI7QUFDRCxPQUZELE1BRU8sSUFBSUQsY0FBYyxDQUFsQixFQUFxQjtBQUMxQkMscUJBQWEsSUFBYjtBQUNEO0FBQ0Y7QUFDRjs7QUFFRCxTQUFRVCxPQUFPQyxJQUFJSSxNQUFaLEdBQXNCSixJQUFJWSxRQUFKLENBQWEsQ0FBYixFQUFnQmIsSUFBaEIsQ0FBdEIsR0FBOENDLEdBQXJEO0FBQ0QsQyIsImZpbGUiOiJiYXNlNjQtZGVjb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGJhc2U2NFN0cikge1xuICBsZXQgaU91dCA9IDBcbiAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKGJhc2U2NFN0ci5sZW5ndGggKiAzIC8gNCkpXG5cbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGJhc2U2NFN0ci5sZW5ndGgsIHZhbGlkQml0cyA9IDAsIGJpdHNTb0ZhciA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGxldCBiaXRzXG4gICAgY29uc3QgYyA9IGJhc2U2NFN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaWYgKGMgPj0gMHg0MSAmJiBjIDw9IDB4NWEpIHsgLy8gW0EtWl1cbiAgICAgIGJpdHMgPSBjIC0gMHg0MVxuICAgIH0gZWxzZSBpZiAoYyA+PSAweDYxICYmIGMgPD0gMHg3YSkgeyAvLyBbYS16XVxuICAgICAgYml0cyA9IGMgLSAweDYxICsgMHgxYVxuICAgIH0gZWxzZSBpZiAoYyA+PSAweDMwICYmIGMgPD0gMHgzOSkgeyAvLyBbMC05XVxuICAgICAgYml0cyA9IGMgLSAweDMwICsgMHgzNFxuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHgyYikgeyAvLyArXG4gICAgICBiaXRzID0gMHgzZVxuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHgyZikgeyAvLyAvXG4gICAgICBiaXRzID0gMHgzZlxuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHgzZCkgeyAvLyA9XG4gICAgICB2YWxpZEJpdHMgPSAwXG4gICAgICBjb250aW51ZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZ25vcmUgYWxsIG90aGVyIGNoYXJhY3RlcnMhXG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBiaXRzU29GYXIgPSAoYml0c1NvRmFyIDw8IDYpIHwgYml0c1xuICAgIHZhbGlkQml0cyArPSA2XG4gICAgaWYgKHZhbGlkQml0cyA+PSA4KSB7XG4gICAgICB2YWxpZEJpdHMgLT0gOFxuICAgICAgYXJyW2lPdXQrK10gPSBiaXRzU29GYXIgPj4gdmFsaWRCaXRzXG4gICAgICBpZiAodmFsaWRCaXRzID09PSAyKSB7XG4gICAgICAgIGJpdHNTb0ZhciAmPSAweDAzXG4gICAgICB9IGVsc2UgaWYgKHZhbGlkQml0cyA9PT0gNCkge1xuICAgICAgICBiaXRzU29GYXIgJj0gMHgwZlxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoaU91dCA8IGFyci5sZW5ndGgpID8gYXJyLnN1YmFycmF5KDAsIGlPdXQpIDogYXJyXG59XG4iXX0=